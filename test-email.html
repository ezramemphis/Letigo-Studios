<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Email Preview</title>

<style>
body{font-family:Arial,sans-serif;padding:2rem;background:#f9f9f9}
.form-container{max-width:600px;margin:auto}
input,textarea{width:100%;padding:.5rem;margin-bottom:1rem}
button{padding:.5rem 1rem;margin-bottom:1rem;cursor:pointer}
.email-preview{border:1px solid #ccc;padding:1rem;background:#fff}
label{display:block;margin-bottom:.25rem;font-weight:bold}
.color-row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}
.code-pill{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;padding:.4rem .6rem;border:1px solid #ccc;background:#f0f0f0;border-radius:6px;user-select:none;white-space:nowrap}
</style>


</head>
<body>

<h1>Live Email Preview</h1>

<div class="form-container">
  <label>Name</label>
  <input id="name" placeholder="John Doe">

  <label>Email</label>
  <input id="email" placeholder="john@example.com">

  <label>Message</label>
  <textarea id="message" rows="5" placeholder="Your message here..."></textarea>

  <label>Header Color</label>
  <div class="color-row">
    <input type="color" id="headerColor" value="#4a90e2">
    <button id="copyColor" class="code-pill" title="Click to copy">#4a90e2</button>
  </div>
</div>

<h2>Email Output:</h2>
<div class="email-preview" id="emailPreview"></div>

<script>
const header=document.getElementById('headerColor'),
      copyBtn=document.getElementById('copyColor');

function save(){['name','email','message','headerColor'].forEach(id=>localStorage.setItem(id,document.getElementById(id).value))}
function restore(){['name','email','message','headerColor'].forEach(id=>{if(localStorage.getItem(id))document.getElementById(id).value=localStorage.getItem(id)});updateCode()}
function updateCode(){copyBtn.textContent=header.value}
async function copyCode(){try{await navigator.clipboard.writeText(copyBtn.textContent);let t=copyBtn.textContent;copyBtn.textContent='Copied!';setTimeout(()=>copyBtn.textContent=t,700)}catch(e){alert('Copy failed: '+copyBtn.textContent)}}

function updatePreview(){
  const name=document.getElementById('name').value||'John Doe',
        email=document.getElementById('email').value||'john@example.com',
        message=document.getElementById('message').value||'Hello, this is a test message!',
        color=header.value;
  save();updateCode();
  document.getElementById('emailPreview').innerHTML=`
  <div style="font-family:'Segoe UI',Tahoma,Verdana,sans-serif;background:#f5f5f7;padding:20px;border-radius:12px">
    <h2 style="color:${color};text-align:center;font-size:28px;margin-bottom:10px">ðŸ“¬ You've Got Mail! (New Contact Form Submission)</h2>
    <div style="background:#fff;padding:15px 20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.05)">
      <p style="margin:5px 0"><strong style="color:${color}">Name:</strong> <span style="color:#333">${name}</span></p>
      <p style="margin:5px 0"><strong style="color:${color}">Email:</strong> <span style="color:#333">${email}</span></p>
      <p style="margin:5px 0"><strong style="color:${color}">Message:</strong></p>
      <p style="color:#555;line-height:1.6;padding-left:10px;border-left:3px solid ${color}">${message.replace(/\n/g,'<br>')}</p>
    </div>
    <hr style="border:none;border-top:2px dashed ${color};margin:20px 0">
    <p style="font-size:.85em;color:#888;text-align:center">âœ¨ This message was lovingly sent from your Letigo Contact Form âœ¨</p>
    <p style="font-size:.8em;color:#aaa;text-align:center;margin-top:5px">(P.S. You can totally reply to <span style="color:${color}">${email}</span>)</p>
  </div>`;
}

// Init
restore();updatePreview();
['name','email','message','headerColor'].forEach(id=>document.getElementById(id).addEventListener('input',updatePreview));
copyBtn.addEventListener('click',copyCode);
</script>

</body>
</html>
